{% load pipeline %}
{% load static %}
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {# The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags #}

    <title>Healthsites.io</title>

    <link href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" rel="stylesheet" type="text/css"
          media="screen, projection"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.css" rel="stylesheet"
          type="text/css" media="screen, projection"/>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" type="text/css"
          media="screen, projection"/>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"
          type="text/css" media="screen, projection"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" rel="stylesheet" type="text/css"
          media="screen, projection"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.css" rel="stylesheet"
          type="text/css" media="screen, projection"/>

    <link href='https://fonts.googleapis.com/css?family=Raleway:300,400,700,500,300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Ubuntu:400,400italic,300,500,700' rel='stylesheet'
          type='text/css'>


    {% stylesheet 'project' %}

    {# HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries  #}
    {# WARNING: Respond.js doesn't work if you view the page via file://  #}
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
<nav class="navbar navbar-fixed-top masthead">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span
                    class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button>
            <a class="navbar-brand" href="#"><span class="hs-logo"></span>Healthsites.io</a>
            <a class="navbar-share" href="#"><i class="fa fa-share-alt"></i></a>

            <div class="hidden" id="site-social" style="width: 115px;">
                <i class="medium-size-icon mdi-content-clear" id="site-social-icon-open"></i>
                <a href="https://twitter.com/intent/tweet?text=Share and develop critical health facility data on http://healthsites.io"
                   class=" withripple">
                    <i class="fa fa-twitter"></i></a>
                <a class="facebook-hs-share withripple" href="#">
                    <i class="fa fa-facebook"></i></a>
                <a onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"
                   href="https://plus.google.com/share?url=http://healthsites.io/">
                    <i class="fa fa-google-plus"></i>
                </a>
            </div>
            <span class="tagline">A free, curated, global, canonical source of healthcare location data</span>
        </div>

        <div id="navbar" class="collapse navbar-collapse pull-right">
            <ul class="nav navbar-nav">
                <li><a href="#about">About</a></li>
                <li><a href="{% url "map" %}">Map</a></li>
                <li><a href="#map-data">Country data</a></li>
                <li><a href="#lifecycle">How it works</a></li>
                <li><a href="#cta">Share data</a></li>
                <li><a href="#partners">Partners</a></li>
                <li><a class="navbar-search" href="#"><i class="fa fa-search"></i></a></li>
                <li><a class="navbar-chat" href="#"><i class="fa fa-comments"></i></a></li>
            </ul>
        </div>
        <!--/.nav-collapse -->

    </div>
    <div class="nav-searchbar container-fluid">
        <form action="{% url 'map' %}" method="post">
            {% csrf_token %}
            <div class="option-group">
                <div class="option">
                    <span></span>
                    <input type="radio" name="option" id="radio-healthsite" value="healthsite" checked="checked">
                    <span></span>
                    <label class="option" for="radio-healthsite">healthsite</label>
                </div>
                <div class="option">
                    <span></span>
                    <input type="radio" name="option" id="radio-place" value="place">
                    <span></span>
                    <label class="option" for="radio-healthsite">place</label>
                </div>
            </div>
            <input type="search" name="q" placeholder="search..." id="search-box">
            <input type="submit" value="search" id="search-button">
        </form>
    </div>
</nav>
<section class="white about">
    <div class="container pad0x">
        <div class="left-side">
            <div class="center profile-image-size">
                {% if user.profile_picture == "" %}
                    <img class="profile-image profile-image-size" src="{% static "img/no-profile-img.gif" %}"/>
                {% else %}
                    <img class="profile-image profile-image-size" src="/media/{{ user.profile_picture }}"/>
                {% endif %}
            </div>
            <div class="center header">
                <h1>{{ user.username }}</h1>
            </div>
            <div class="center">
                <strong>Name</strong>
            </div>
            <div class="center">
                {% if user.get_full_name == "" %}
                    -
                {% else %}
                    {{ user.get_full_name }}
                {% endif %}
            </div>
            <div class="center">
                <strong>Email</strong>
            </div>
            <div class="center">
                {% if user.email == "" %}
                    -
                {% else %}
                    {{ user.email }}
                {% endif %}</div>
        </div>
        <div class="right-side">
            <div class="center header">
                <h1>List of location</h1>
            </div>
        </div>
    </div>
    <div class="clear"></div>
</section>
<footer id="colophon">
    <div class="container">
        <div class="col-md-3 pad0x">
            <ul class="footer-nav-1">
                <li><a href="https://github.com/healthsites/healthsites/wiki/Vision" target="_blank">Vision</a></li>
                <li><a href="https://github.com/healthsites/healthsites/wiki/Participate"
                       target="_blank">Participate</a></li>
                <li><a href="https://github.com/healthsites/healthsites/wiki/Healthsites-roadmap" target="_blank">Road
                    map</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </div>
        <div class="col-md-3 pad0x">
            <ul class="footer-nav-2">
                <li><a href="https://github.com/healthsites/healthsites/wiki/Data" target="_blank">Data</a></li>
                <li><a href="https://github.com/healthsites/healthsites" target="_blank">Source code</a></li>
                <li><a href="#">Map edit</a></li>
                <li><a href="https://github.com/healthsites/healthsites/wiki/Data-lifecycle" target="_blank">Data
                    lifecycle</a></li>
            </ul>
        </div>
        <div class="col-md-3 pad0x">
            <ul class="footer-nav-2">
                <li><a href="data-loader">Upload form</a></li>
                <li><a href="https://gitter.im/healthsites/healthsites" target="_blank">Chat space</a></li>
                <li><a href="https://github.com/healthsites/healthsites/wiki/API" target="_blank">API</a></li>
                <li><a href="https://github.com/healthsites/healthsites/" target="_blank">GitHub</a></li>
            </ul>
        </div>
        <div class="col-md-3 right pad0x">
            <ul class="footer-nav-2 social">
                <li><a href="#"><i class="fa fa-twitter-square"></i></a></li>
                <li><a href="#"><i class="fa fa-facebook-square"></i></a></li>
                <li><a href="#"><i class="fa fa-linkedin-square"></i></a></li>
                <li><a href="#"><i class="fa fa-envelope-square"></i></a></li>
            </ul>
        </div>
        <div style="clear:both;"></div>
        <div class="copy">

        </div>
    </div>
</footer>

<script type="text/javascript" src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
{#<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>#}
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.7/d3.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw-src.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-signals/1.0.0/js-signals.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/hasher/1.2.0/hasher.min.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/crossroads/0.12.2/crossroads.min.js"></script>


{% javascript 'project' %}
{% javascript 'home' %}
{% javascript 'map_app' %}

{% block extra_js %}
    <script>
        var chart = c3.generate({
            bindto: '#chart1',
            size: {
                height: 220
            },
            bar: {
                width: 18
            },
            data: {
                x: 'x',
                y: 'percent',
                columns: [
                    //the healthsites names
                    ['x', 'Hospitals', 'Clinics', 'Nursing home', 'Dentist', 'Pharmacy'],
                    //the healthsites number
                    ['number', 63739, 63291, 32667, 25787, 87654],
                    //the healthsites percentgage
                    ['percent', 0.22, 0.21, 0.15, 0.12, 0.31]
                ],
                axes: {
                    number: 'y2'
                },
                types: {
                    percent: 'bar',
                    number: 'bar'
                },
                order: 'asc',

                labels: {
                    format: {
                        number: function (v, id, i, j) {
                            return v;
                        },
                    }
                },


            },
            axis: {
                rotated: true,
                x: {
                    type: 'category',

                },
                y: {
                    max: 1,
                    tick: {
                        values: [0, 0.5, 1],
                        format: d3.format('%,')

                    }
                }
            },
            legend: {
                show: false
            },
            color: {
                pattern: ['#b6cccc', '#f89ea1']
            }
        });

        var piechart = c3.generate({
            bindto: '#piechart',
            size: {
                height: 220
            },
            data: {
                // iris data from R
                columns: [
                    ['complete', 30],
                    ['partial', 120],
                    ['basic', 65],
                ],
                colors: {
                    complete: '#f89ea1',
                    partial: '#b6cccc',
                    basic: '#8698a4'
                },
                type: 'pie',
                onclick: function (d, i) {
                    console.log("onclick", d, i);
                },
                onmouseover: function (d, i) {
                    console.log("onmouseover", d, i);
                },
                onmouseout: function (d, i) {
                    console.log("onmouseout", d, i);
                }
            }
        });
    </script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>
        var search_url = "{% url 'locality-name-search' %}";
        $(document).ready(function () {
            function set_search_url(url, data_type) {
                $(function () {
                    $("#search-box").autocomplete({
                        source: function (request, response) {
                            $.ajax({
                                url: url,
                                dataType: data_type,
                                data: {
                                    q: request.term
                                },
                                success: function (data) {
                                    response(data);
                                }
                            });
                        },
                        minLength: 3,
                        select: function (event, ui) {
                        },
                        open: function () {
                            $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
                        },
                        close: function () {
                            $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
                        }
                    });
                });
            }

            set_search_url(search_url);
            $('input:radio[name=option]').change(function () {
                if (this.value == 'place') {
                    search_url = 'http://gd.geobytes.com/AutoCompleteCity';
                    set_search_url(search_url, 'jsonp');

                } else if (this.value == 'healthsite') {
                    search_url = "{% url 'locality-name-search' %}";
                    set_search_url(search_url, 'json');
                } else {
                    search_url = "{% url 'locality-name-search' %}";
                    set_search_url(search_url, 'json');
                }
            });

            // initialize the app
            {#            new APP();#}
            // We need different app for the home page. Adapt from the current app.
        });
    </script>
{% endblock extra_js %}

</body>
</html>
